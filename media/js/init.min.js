/**
* Simple isotope module  - Joomla Module 
* Version			: 4.1.6
* Package			: Joomla 4.x.x
* copyright 		: Copyright (C) 2023 ConseilGouz. All rights reserved.
* license    		: http://www.gnu.org/licenses/gpl-2.0.html GNU/GPL
* From              : isotope.metafizzy.co
*/
var $close,grid_toggle,iso_article,me,empty_message,items_limit,sav_limit,iso_height,iso_width,article_frame,quicksearch,resetToggle,myid,qsRegex,$asc,$sortby,range_init,range_sel,min_range,max_range,cookie_name,iso=[],filters=[],options=[],rangeSlider=[],std_parents=["cat","tags","lang","alpha"];function displayArticle(e){var t="";if(e.success){for(var i=0;i<e.data.length;i++){if(t+="<h1>"+e.data[i].title+'<button type="button" class="close">X</button></h1>',t+=e.data[i].fulltext,""==e.data[i].fulltext&&(t+=e.data[i].introtext),e.data[i].scripts.length>0)for(var o=0;o<e.data[i].scripts.length;o++){var s=document.createElement("script");s.addEventListener("load",(function(){console.log("Successfully loaded scripts")})),s.src=e.data[i].scripts[o],document.head.appendChild(s)}if(e.data[i].css.length>0)for(o=0;o<e.data[i].css.length;o++){var l=document.createElement("link");l.type="text/css",l.rel="stylesheet",l.addEventListener("load",(function(){console.log("Successfully loaded css")})),l.href=e.data[i].css[o],document.head.appendChild(l)}}iso_article.innerHTML=t,$close=document.querySelector("button.close"),["click","touchstart"].forEach((e=>{$close.addEventListener(e,resetToggle)}))}else if(t=e.message,e.messages&&e.messages.error)for(var a=0;a<e.messages.error.length;a++)t+="<br/>"+e.messages.error[a]}function iso_cat_k2(e){if(me="#isotope-main-"+e+" ",items_limit=options[e].limit_items,sav_limit=options[e].limit_items,empty_message="true"==options[e].empty,filters[e]={},asc="true"==options[e].ascending,sort_by=options[e].sortby,-1!==sort_by.indexOf("featured"))for(sortValue=sort_by.split(","),asc={},a=0;a<sortValue.length;a++)"featured"==sortValue[a]?asc[sortValue[a]]=!1:asc[sortValue[a]]="true"==options[e].ascending;0==options[e].limit_items&&(document.querySelector(me+".iso_button_more").style.display="none"),""==options[e].default_cat||null==options[e].default_cat||void 0===options[e].default_cat?filters[e].cat=["*"]:filters[e].cat=[options[e].default_cat],""==options[e].default_tag||null==options[e].default_tag||void 0===options[e].default_tag?filters[e].tags=["*"]:filters[e].tags=[options[e].default_tag],filters[e].lang=["*"],filters[e].alpha=["*"];var t=getCookie(cookie_name="simple_isotope_"+e);""!=t&&($arr=t.split("&"),$arr.forEach(splitCookie)),"true"==options[e].displayrange&&(min_range||(min_range=parseInt(options[e].minrange),max_range=parseInt(options[e].maxrange)),rangeSlider[e]=new rSlider({target:"#rSlider_"+e,values:{min:parseInt(options[e].minrange),max:parseInt(options[e].maxrange)},step:parseInt(options[e].rangestep),set:[min_range,max_range],range:!0,tooltip:!0,scale:!0,labels:!0,onChange:rangeUpdated})),"string"==typeof sort_by&&(sort_by=sort_by.split(","));var i=document.querySelector(me+".isotope_grid");if(iso[e]=new Isotope(i,{itemSelector:"none",percentPosition:!0,layoutMode:options[e].layout,getSortData:{title:"[data-title]",category:"[data-category]",date:"[data-date]",click:"[data-click] parseInt",rating:"[data-rating] parseInt",id:"[data-id] parseInt",blog:"[data-blog] parseInt",featured:"[data-featured] parseInt"},sortBy:sort_by,sortAscending:asc,isJQueryFiltering:!1,filter:function(e){if(e)return grid_filter(e)}}),imagesLoaded(i,(function(){iso[e].options.itemSelector=".isotope_item";var t=Array.prototype.slice.call(iso[e].element.querySelectorAll(".isotope_item"));iso[e].appended(t),updateFilterCounts(e),"random"==sort_by&&iso[e].shuffle(),"undefined"!=typeof $toogle&&(iso_width=grid_toggle.width(),iso_height=grid_toggle.height())})),iso_div=document.querySelector(me+".isotope-div"),iso_div.addEventListener("refresh",(function(){iso[e].arrange()})),iso[e].arrange(),"infinite"==options[e].pagination){var o=Isotope.data(me+".isotope_grid"),s=new InfiniteScroll(me+".isotope_grid",{path:function(){return currentpage=this.loadCount,"?start="+(currentpage+1)*options[e].page_count},append:".isotope_item",outlayer:o,status:".page-load-status"});let t=document.querySelector(me+".iso_button_more");if("true"==options[e].infinite_btn){s.option({button:".iso_button_more",loadOnScroll:!1});let e=document.querySelector(me+".iso_button_more");t.style.display="block",["click","touchstart"].forEach((t=>{e.addEventListener(t,(function(t){t.stopPropagation(),t.preventDefault(),s.loadNextPage(),s.option({loadOnScroll:!0}),e.style.display="none",event.preventDefault()}))}))}else t.style.display="hide";s.on("append",(function(t,i,o,s){infinite_buttons(e,o)}))}if(hamburgerbtn=document.getElementById("offcanvas-hamburger-btn"),hamburgerbtn&&(["click"].forEach((t=>{hamburgerbtn.addEventListener(t,(function(t){var i=function(t,o=!1){!1===o||o>0?(0!=o&&o--,setTimeout((function(){i(t,o)}),100)):(void 0!==rangeSlider[e]&&rangeSlider[e].onResize(),t())};i((function(){document.querySelector(".offcanvas")}),3)}))})),"*"!=filters[e].cat[0]||"*"!=filters[e].tags[0])){grouptype=["cat","tags"],optionstype=[options[e].displayfiltercat,options[e].displayfilter];for(var l=0;l<grouptype.length;l++)if("*"!=filters[e][grouptype[l]][0]&&(clone_exist=document.querySelector(me+'#clonedbuttons button[data-sort-value="'+filters[e][grouptype[l]]+'"]'),!clone_exist)){agroup=document.querySelectorAll(me+".filter-button-group-"+grouptype[l]+" button");for(var a=0;a<agroup.length;a++)agroup[a].getAttribute("data-sort-value")==filters[e][grouptype[l]]&&(create_clone_button(grouptype[l],filters[e][grouptype[l]],agroup[a].textContent,optionstype[l],""),create_clone_listener(filters[e][grouptype[l]]))}}var r=document.querySelectorAll(me+".sort-by-button-group button");for(a=0;a<r.length;a++)["click","touchstart"].forEach((e=>{r[a].addEventListener(e,(function(e){e.stopPropagation(),e.preventDefault(),update_sort_buttons(this);for(var t=0;t<r.length;t++)r[t].classList.remove("is-checked");this.classList.add("is-checked")}))}));(quicksearch=document.querySelector(me+".quicksearch"))&&quicksearch.addEventListener("keyup",(function(){this.parentNode.getAttribute("data-module-id"),me="#isotope-main-"+e+" ",quicksearch=document.querySelector(me+".quicksearch"),qsRegex=new RegExp(quicksearch.value,"gi"),CG_Cookie_Set(e,"search",quicksearch.value),iso[e].arrange(),updateFilterCounts(e)}));for(var n=document.querySelectorAll(me+".ison-cancel-squared"),d=0;d<n.length;d++)["click","touchstart"].forEach((t=>{n[d].addEventListener(t,(function(t){t.stopPropagation(),t.preventDefault(),e=this.parentNode.getAttribute("data-module-id"),me="#isotope-main-"+e+" ",(quicksearch=document.querySelector(me+".quicksearch"))&&(quicksearch.value=""),qsRegex=new RegExp("","gi"),CG_Cookie_Set(e,"search",""),rangeSlider[e]&&(range_sel=range_init,ranges=range_sel.split(","),rangeSlider[e].setValues(parseInt(ranges[0]),parseInt(ranges[1])),CG_Cookie_Set(e,"range",range_sel)),filters[e].cat=["*"],filters[e].tags=["*"],filters[e].lang=["*"],filters[e].alpha=["*"],grouptype=["cat","tags","alpha","fields"];for(var i=0;i<grouptype.length;i++){agroup=document.querySelectorAll(me+".filter-button-group-"+grouptype[i]+" button");for(var o=0;o<agroup.length;o++)agroup[o].classList.remove("is-checked"),"*"==agroup[o].getAttribute("data-sort-value")&&addClass(agroup[o],"is-checked"),"all"==agroup[o].getAttribute("data-all")&&agroup[o].setAttribute("selected",!0),"fields"==grouptype[i]&&(removeClass(agroup[o],"iso_hide_elem"),myparent=agroup[o].parentNode.getAttribute("data-filter-group"),myparent&&(filters[e][myparent]=["*"]))}agroup=document.querySelectorAll(me+".iso_lang button");for(o=0;o<agroup.length;o++)agroup[o].classList.remove("is-checked"),"*"==agroup[o].getAttribute("data-sort-value")&&addClass(agroup[o],"is-checked"),"all"==agroup[o].getAttribute("data-all")&&agroup[o].setAttribute("selected",!0);agroup=document.querySelectorAll(me+'select[id^="isotope-select-"]');for(o=0;o<agroup.length;o++){var s=agroup[o].parentElement.parentElement.parentElement.getAttribute("data-filter-group"),l=document.querySelector("joomla-field-fancy-select#isotope-select-"+s).choicesInstance;l.removeActiveItems(),l.setChoiceByValue(""),filters[e][s]=["*"]}$buttons=document.querySelectorAll("#clonedbuttons .is-checked");for(o=0;o<$buttons.length;o++)$buttons[o].remove();update_cookie_filter(e,filters[e]),iso[e].arrange(),updateFilterCounts(e),quicksearch[e]&&quicksearch[e].focus()}))}));"listmulti"==options[e].displayfilter&&events_listmulti("tags"),"listmulti"==options[e].displayfiltercat&&events_listmulti("cat"),"listmulti"==options[e].displayfilterfields&&events_listmulti("fields"),"list"!=options[e].displayfiltercat&&"listex"!=options[e].displayfiltercat||events_list("cat"),"list"!=options[e].displayfilter&&"listex"!=options[e].displayfilter||events_list("tags"),"list"!=options[e].displayfilterfields&&"listex"!=options[e].displayfilterfields||events_list("fields"),"multi"!=options[e].displayfiltercat&&"multiex"!=options[e].displayfiltercat||events_multibutton("cat"),"multi"!=options[e].displayfilter&&"multiex"!=options[e].displayfilter||events_multibutton("tags"),"multi"!=options[e].displayfilterfields&&"multiex"!=options[e].displayfilterfields||events_multibutton("fields"),"multi"==options[e].language_filter&&events_multibutton("lang"),"multi"==options[e].displayalpha&&events_multibutton("alpha"),"button"==options[e].displayfiltercat&&events_button("cat"),"button"==options[e].displayfilter&&events_button("tags"),"button"==options[e].displayfilterfields&&events_button("fields"),"button"==options[e].language_filter&&events_button("lang"),"button"==options[e].displayalpha&&events_button("alpha"),more=document.querySelector(me+".iso_button_more"),more&&["click","touchstart"].forEach((t=>{more.addEventListener(t,(function(t){e=this.parentNode.getAttribute("data-module-id"),t.stopPropagation(),t.preventDefault(),items_limit>0?(items_limit=0,this.textContent=options[e].libless):(items_limit=options[e].limit_items,this.textContent=options[e].libmore),updateFilterCounts(e)}))}));var c=document.getElementById("offcanvas_isotope");c&&(c.addEventListener("hidden.bs.offcanvas",(function(){document.getElementById("offcanvas_isotope").classList.remove("offcanvas25"),document.getElementsByClassName("isotope_grid")[0].classList.remove("isogrid75"),document.getElementsByClassName("isotope_grid")[0].classList.remove("offstart"),document.getElementsByClassName("isotope_grid")[0].classList.remove("offend"),iso[e].arrange()})),c.addEventListener("show.bs.offcanvas",(function(){document.getElementById("offcanvas_isotope").classList.add("offcanvas25"),document.getElementById("offcanvas_isotope").classList.contains("offcanvas-start")&&document.getElementsByClassName("isotope_grid")[0].classList.add("offstart"),document.getElementById("offcanvas_isotope").classList.contains("offcanvas-end")&&document.getElementsByClassName("isotope_grid")[0].classList.add("offend"),iso[e].arrange()})))}function rangeUpdated(){target=this.target.split("_"),myid=target[1],void 0!==rangeSlider[myid]&&(range_sel=rangeSlider[myid].getValue(),range_init=rangeSlider[myid].conf.values[0]+","+rangeSlider[myid].conf.values[rangeSlider[myid].conf.values.length-1],CG_Cookie_Set(myid,"range",range_sel),iso[myid].arrange())}function events_listmulti(e){agroup=document.querySelectorAll(me+'select[id^="isotope-select-'+e+'"]');for(var t=0;t<agroup.length;t++)agroup[t].addEventListener("choice",(function(e,t){filter_list_multi(this,e,"choice")})),agroup[t].addEventListener("removeItem",(function(e,t){filter_list_multi(this,e,"remove")})),$parent=agroup[t].parentElement.parentElement.parentElement.getAttribute("data-filter-group"),void 0===filters[myid][$parent]&&(filters[myid][$parent]=["*"]);if("*"!=filters[myid][$parent][0]&&1==filters[myid][$parent].length){var i=document.querySelector("joomla-field-fancy-select#isotope-select-"+e),o=i.choicesInstance,s=filters[myid][$parent][0];o.removeActiveItemsByValue(""),o.setChoiceByValue(s),"offcanvas-body"==i.parentElement.parentElement.className&&(clone_exist=document.querySelector(me+'#clonedbuttons button[data-sort-value="'+filters[myid][e]+'"]'),clone_exist||(sel=s,lib=o.getValue()[0].label,child=null,create_clone_button(e,sel,lib,"list",child),create_clone_listener(sel)))}}function events_list(e){agroup=document.querySelectorAll(me+".filter-button-group-"+e);for(var t=0;t<agroup.length;t++)agroup[t].addEventListener("choice",(function(e,t){filter_list(this,e,"choice")})),agroup[t].addEventListener("removeItem",(function(e,t){filter_list(this,e,"remove")}));var i=document.querySelector("joomla-field-fancy-select#isotope-select-"+e);if(i){var o=i.choicesInstance;o.setChoiceByValue(filters[myid][e]),"offcanvas-body"==i.parentElement.parentElement.className&&"*"!=filters[myid][e]&&(clone_exist=document.querySelector(me+'#clonedbuttons button[data-sort-value="'+filters[e]+'"]'),clone_exist||(sel=filters[myid][e],lib=o.getValue().label,child=null,create_clone_button(e,sel,lib,"list",child),create_clone_listener(sel)))}}function events_button(e){agroup="lang"==e?document.querySelectorAll(me+".iso_lang button"):document.querySelectorAll(me+".filter-button-group-"+e+" button");for(var t=0;t<agroup.length;t++)["click","touchstart"].forEach((e=>{agroup[t].addEventListener(e,(function(e){e.stopPropagation(),e.preventDefault(),filter_button(this,e),mygroup=this.parentNode.querySelectorAll("button");for(var t=0;t<mygroup.length;t++)removeClass(mygroup[t],"is-checked");addClass(this,"is-checked")}))}))}function events_multibutton(e){agroup="lang"==e?document.querySelectorAll(me+".iso_lang button"):document.querySelectorAll(me+".filter-button-group-"+e+" button");for(var t=0;t<agroup.length;t++)["click","touchstart"].forEach((e=>{agroup[t].addEventListener(e,(function(e){e.stopPropagation(),e.preventDefault(),filter_multi(this,e),set_buttons_multi(this)}))}))}function update_sort_buttons(e){myid=e.parentNode.getAttribute("data-module-id");var t=e.getAttribute("data-sort-value");if("random"==t)return CG_Cookie_Set(myid,"sort",t+"-"),void iso[myid].shuffle();for(sens=e.getAttribute("data-sens"),t=t.split(","),hasClass(e,"is-checked")?"-"==sens?(e.setAttribute("data-sens","+"),asc=!0):(e.setAttribute("data-sens","-"),asc=!1):(sens=e.getAttribute("data-init"),e.setAttribute("data-sens",sens),asc=!0,"-"==sens&&(asc=!1)),sortAsc={},i=0;i<t.length;i++)"featured"==t[i]?sortAsc[t[i]]=!1:sortAsc[t[i]]=asc;CG_Cookie_Set(myid,"sort",t+"-"+asc),iso[myid].options.sortBy=t,iso[myid].options.sortAscending=sortAsc,iso[myid].arrange()}function infinite_buttons(e,t){if("false"!=options[e].displayalpha)for(x=0;x<t.length-1;x++)if(alpha=t[x].attributes["data-alpha"].value,mybutton=document.querySelector(me+".filter-button-group-alpha .iso_button_alpha_"+alpha),!mybutton){buttons=document.querySelector(me+".filter-button-group-alpha");var i=document.createElement("button");i.classList.add("btn"),i.classList.add(options[e].button_bootstrap.substr(4,100).trim()),i.classList.add("iso_button_alpha_"+alpha),i.setAttribute("data-sort-value",alpha),i.title=alpha,i.innerHTML=alpha,buttons.append(i)}}function grid_filter(e){var t=!qsRegex||e.textContent.match(qsRegex),i=e.getAttribute("data-category"),o=e.getAttribute("class").split(" "),s=!1,l=!0;if(myid=e.parentNode.getAttribute("data-module-id"),-1==filters[myid].alpha.indexOf("*")&&(alpha=e.getAttribute("data-title").substring(0,1),-1==filters[myid].alpha.indexOf(alpha)))return!1;if(-1==filters[myid].lang.indexOf("*")&&(lalang=e.getAttribute("data-lang"),-1==filters[myid].lang.indexOf(lalang)))return!1;if(rangeSlider[myid]){var a=e.getAttribute("data-range");range_sel!=range_init&&(ranges=range_sel.split(","),l=parseInt(a)>=parseInt(ranges[0])&&parseInt(a)<=parseInt(ranges[1]))}if("fields"!=options[myid].article_cat_tag&&"catfields"!=options[myid].article_cat_tag&&"tagsfields"!=options[myid].article_cat_tag&&"cattagsfields"!=options[myid].article_cat_tag){if(-1!=filters[myid].cat.indexOf("*")&&-1!=filters[myid].tags.indexOf("*"))return t&&l&&!0;if(count=0,-1==filters[myid].cat.indexOf("*")){if(-1==filters[myid].cat.indexOf(i))return!1;count=1}if(-1!=filters[myid].tags.indexOf("*"))return t&&l&&!0;for(var r in o)-1!=filters[myid].tags.indexOf(o[r])&&(s=!0,count+=1);return"true"==options[myid].searchmultiex?(lgth=filters[myid].cat.length+filters[myid].tags.length,-1==filters[myid].tags.indexOf("*")&&-1==filters[myid].cat.indexOf("*")||(lgth-=1),t&&l&&count==lgth):t&&l&&s}if(ix=0,void 0===filters[myid])return t&&l&&!0;for(x in filterslength=0,filters[myid])"cat"!=x&&"lang"!=x&&"alpha"!=x&&"tags"!=x&&(filterslength++,-1!=filters[myid][x].indexOf("*")&&ix++);if(catok=!1,-1==filters[myid].cat.indexOf("*")){if(-1==filters[myid].cat.indexOf(i))return!1;catok=!0}else catok=!0;if(tagok=!1,-1==filters[myid].tags.indexOf("*"))for(var r in o)-1!=filters[myid].tags.indexOf(o[r])&&(tagok=!0);else tagok=!0;if(ix==filterslength&&catok&&tagok)return t&&l&&!0;for(var n in count=0,o)for(x in filters[myid])"cat"!=x&&"lang"!=x&&"alpha"!=x&&"tags"!=x&&-1!=filters[myid][x].indexOf(o[n])&&(count+=1);if("true"==options[myid].searchmultiex){for(x in lgth=0,filters[myid])"cat"!=x&&"lang"!=x&&"alpha"!=x&&"tags"!=x&&(lgth+=filters[myid][x].length,-1!=filters[myid][x].indexOf("*")&&(lgth-=1));return t&&l&&count==lgth&&tagok}return t&&l&&count>=filterslength-ix&&catok&&tagok}function filter_list(e,t,i){if(myid=e.getAttribute("data-module-id"),$parent=e.getAttribute("data-filter-group"),$isclone=!1,"clonedbuttons"==e.parentNode.id?($selectid=$parent,$isclone=!0,sortValue=""):($selectid=e.getAttribute("data-filter-group"),sortValue=e.querySelector(".is-highlighted"),sortValue=sortValue.dataset.value),"undefined"==typeof sortValue&&(sortValue=""),elChoice=document.querySelector("joomla-field-fancy-select#isotope-select-"+$selectid),choicesInstance=elChoice.choicesInstance,$needclone=!1,$grdparent=e.parentNode,"offcanvas-body"==$grdparent.className&&($needclone=!0),"remove"==i&&$needclone)return removeFilter(filters[myid],$parent,t.detail.value),myclone=document.querySelector('#clonedbuttons button[data-sort-value="'+t.detail.value+'"]'),myclone&&myclone.remove(),void(0==filters[myid][$parent].length&&(filters[myid][$parent]=["*"],choicesInstance.setChoiceByValue(""),update_cookie_filter(myid,filters[myid])));if(""==sortValue){choicesInstance.removeActiveItems(),choicesInstance.setChoiceByValue(""),filters[myid][$parent]=["*"],$buttons=document.querySelectorAll('#clonedbuttons [data-filter-group="'+$parent+'"]');for(var o=0;o<$buttons.length;o++)$buttons[o].remove()}else if(filters[myid][$parent]=[sortValue],$needclone){$buttons=document.querySelectorAll('#clonedbuttons [data-filter-group="'+$parent+'"]');for(o=0;o<$buttons.length;o++)$buttons[o].remove();clone_exist=document.querySelector(me+'#clonedbuttons button[data-sort-value="'+filters[myid][$parent]+'"]'),clone_exist||(lib=t.detail.choice.label,create_clone_button($parent,sortValue,lib,"list",""),create_clone_listener(sortValue))}update_cookie_filter(myid,filters[myid]),iso[myid].arrange(),updateFilterCounts(myid)}function filter_list_multi(e,t,i){myid=e.getAttribute("data-module-id"),$evnt=t,$params=i,$isclone=!1,"clonedbuttons"==e.parentNode.id?($parent=e.getAttribute("data-filter-group"),$selectid="isotope-select-"+$parent,$isclone=!0):($parent=e.parentNode.parentNode.parentNode.getAttribute("data-filter-group"),$selectid=e.getAttribute("id")),void 0===filters[myid][$parent]&&(filters[myid][$parent]=[]);var o=document.querySelector("joomla-field-fancy-select#"+$selectid).choicesInstance;if("remove"==$params){if($isclone){removeFilter(filters[myid],$parent,e.getAttribute("data-sort-value")),savfilter=JSON.parse(JSON.stringify(filters[myid])),o.removeActiveItems(),filters[myid]=JSON.parse(JSON.stringify(savfilter)),o.removeActiveItemsByValue("");for(var s=0;s<filters[myid][$parent].length;s++)remval=filters[myid][$parent][s],o.setChoiceByValue(remval)}else removeFilter(filters[myid],$parent,$evnt.detail.value),myclone=document.querySelector('#clonedbuttons button[data-sort-value="'+$evnt.detail.value+'"]'),myclone&&myclone.remove();0==filters[myid][$parent].length&&(filters[myid][$parent]=["*"],o.setChoiceByValue(""))}if($needclone=!1,$grdparent=e.parentNode.parentNode.parentNode.parentNode.parentNode,"offcanvas-body"==$grdparent.classList[0]&&($needclone=!0),"choice"==$params){if(sel=$evnt.detail.choice.value,lib=$evnt.detail.choice.label,""==sel){filters[myid][$parent]=["*"],o.removeActiveItems(),o.setChoiceByValue(""),$buttons=document.querySelectorAll('#clonedbuttons [data-filter-group="'+$parent+'"]');for(s=0;s<$buttons.length;s++)$buttons[s].remove()}else-1!=filters[myid][$parent].indexOf("*")&&(o.removeActiveItemsByValue(""),filters[myid][$parent]=[]),$needclone&&(clone_exist=document.querySelector(me+'#clonedbuttons button[data-sort-value="'+filters[myid][$parent]+'"]'),clone_exist||(create_clone_button($parent,sel,lib,"list_multi",""),create_clone_listener(sel))),addFilter(filters[myid],$parent,sel);o.hideDropdown()}update_cookie_filter(myid,filters[myid]),iso[myid].arrange(),updateFilterCounts(myid)}function filter_button(e,t){if(!hasClass(e,"disabled")){(myid=e.parentNode.getAttribute("data-module-id"))||(myid=e.parentNode.parentNode.getAttribute("data-module-id")),e.parentElement.parentElement.parentElement.getAttribute,$parent=e.parentNode.getAttribute("data-filter-group"),child=e.getAttribute("data-child");var i=e.getAttribute("data-sort-value");if($isclone=!1,"clonedbuttons"==e.parentNode.id&&($parent=e.getAttribute("data-filter-group"),abutton=document.querySelector(".isotope_button-group .iso_button_"+$parent+"_"+i),toggleClass(abutton,"is-checked"),i="*",-1!=std_parents.indexOf($parent)?abutton=document.querySelector(".iso_button_"+$parent+"_tout"):abutton=document.querySelector(".iso_button_tout.filter-button-group-"+$parent),toggleClass(abutton,"is-checked"),$isclone=!0),void 0===filters[myid][$parent]&&(filters[myid][$parent]={}),$needclone=!1,$grdparent=e.parentNode.parentNode,hasClass($grdparent,"offcanvas-body")&&($needclone=!0),$needclone){if(hasClass(e,"is-checked"))return;$buttons=document.querySelectorAll('#clonedbuttons [data-filter-group="'+$parent+'"]');for(var o=0;o<$buttons.length;o++)$buttons[o].remove();"*"!=i&&("img"==t.srcElement.localName?lib=t.srcElement.outerHTML+t.srcElement.nextSibling.textContent:lib=t.srcElement.innerHTML,create_clone_button($parent,i,lib,"button",child),create_clone_listener(i))}"*"==i?(filters[myid][$parent]=["*"],$isclone&&e.remove,child&&set_family_all(me,child,"button")):(filters[myid][$parent]=[i],child&&set_family(me,"",child,i,"button")),update_cookie_filter(myid,filters[myid]),iso[myid].arrange(),updateFilterCounts(myid)}}function filter_multi(e,t){myid=e.parentNode.getAttribute("data-module-id");var i=e.getAttribute("data-sort-value");if(child=e.getAttribute("data-child"),$isclone=!1,"clonedbuttons"==e.parentNode.id){$parent=e.getAttribute("data-filter-group"),$buttons=document.querySelectorAll(".iso_button_"+$parent+"_"+i);for(var o=0;o<$buttons.length;o++)toggleClass($buttons[o],"is-checked");$isclone=!0}else $parent=e.parentNode.getAttribute("data-filter-group"),toggleClass(e,"is-checked");var s=hasClass(e,"is-checked");if($needclone=!1,$grdparent=e.parentNode.parentNode,hasClass($grdparent,"offcanvas-body")&&($needclone=!0),$needclone&&(s&&"*"!=i?("img"==t.srcElement.localName?lib=t.srcElement.outerHTML+t.srcElement.nextSibling.textContent:lib=t.srcElement.innerHTML,create_clone_button($parent,i,lib,"multi",child),create_clone_listener(i)):"*"!=i&&(aclone=document.querySelector("#clonedbuttons .iso_button_"+$parent+"_"+i),aclone.remove())),void 0===filters[myid][$parent]&&(filters[myid][$parent]=[]),"*"==i){filters[myid][$parent]=["*"],clones=document.querySelectorAll('#clonedbuttons [data-filter-group="'+$parent+'"]');for(o=0;o<clones.length;o++)clones[o].remove();child&&set_family_all(me,child,"button")}else removeFilter(filters[myid],$parent,"*"),removeFilter(filters[myid],$parent,"none"),s?(addFilter(filters[myid],$parent,i),child&&set_family(me,$parent,child,i,"button")):(removeFilter(filters[myid],$parent,i),0==filters[myid][$parent].length&&(filters[myid][$parent]=["*"],$isclone&&(aclone=document.querySelector(".filter-button-group-"+$parent+' [data-sort-value="*"]'),addClass(aclone,"is-checked"))),child&&(filters[myid][$parent]==["*"]?set_family_all(me,child,"button"):del_family(me,$parent,child,i,"button")));update_cookie_filter(myid,filters[myid]),iso[myid].arrange(),updateFilterCounts(myid)}function set_buttons_multi(e){if(myid=e.parentNode.getAttribute("data-module-id"),$parent=e.parentNode.getAttribute("data-filter-group"),"*"==e.getAttribute("data-sort-value")){buttons=e.parentNode.querySelectorAll("button.is-checked");for(var t=0;t<buttons.length;t++)removeClass(buttons[t],"is-checked");addClass(e,"is-checked")}else 0==filters[myid][$parent].length||"*"==filters[myid][$parent]?(button_all=e.parentNode.querySelector('[data-sort-value="*"]'),addClass(button_all,"is-checked"),filters[myid][$parent]=["*"],update_cookie_filter(filters[myid]),iso[myid].arrange()):(button_all=e.parentNode.querySelector('[data-sort-value="*"]'),removeClass(button_all,"is-checked"))}function updateFilterCounts(e){me="#isotope-main-"+e+" ";for(var t=document.querySelectorAll(me+".isotope_item"),i=document.querySelector(me+".iso_button_more"),o=iso[e].getFilteredItemElements(),s=o.length,l=document.querySelector(me+".iso_div_empty"),a=0;a<t.length;a++)hasClass(t[a],"iso_hide_elem")&&removeClass(t[a],"iso_hide_elem");if(empty_message&&(0==s?removeClass(l,"iso_hide_elem"):hasClass(l,"iso_hide_elem")||addClass(l,"iso_hide_elem")),items_limit>0){for(var r=0;r<o.length;r++)r>=items_limit&&addClass(t[r],"iso_hide_elem");r<items_limit&&"infinite"!=options[e].pagination?addClass(i,"iso_hide_elem"):removeClass(i,"iso_hide_elem")}if(0==items_limit&&sav_limit>0&&"infinite"!=options[e].pagination){for(r=0;r<o.length;r++)hasClass(o[r],"iso_hide_elem")&&(s-=1);s>sav_limit?removeClass(i,"iso_hide_elem"):addClass(i,"iso_hide_elem")}iso[e].arrange()}function create_clone_button(e,t,i,o,s){buttons=document.querySelector("#clonedbuttons");var l=document.createElement("button");l.classList.add("btn"),l.classList.add("btn-sm"),l.classList.add("iso_button_"+e+"_"+t),l.classList.add("is-checked"),l.setAttribute("data-sort-value",t),l.setAttribute("data-filter-group",e),l.setAttribute("data-clone-type",o),s&&l.setAttribute("data-child",s),i.indexOf("img src")>0?l.title=i.substr(i.indexOf(">")+1):l.title=i,l.innerHTML=i,buttons.prepend(l)}function create_clone_listener(e){onebutton=document.querySelector('#clonedbuttons [data-sort-value="'+e+'"] '),["click","touchstart"].forEach((e=>{onebutton.addEventListener(e,(function(e){e.stopPropagation(),e.preventDefault(),"multi"==this.getAttribute("data-clone-type")&&filter_multi(this),"button"==this.getAttribute("data-clone-type")&&filter_button(this),"list_multi"==this.getAttribute("data-clone-type")&&filter_list_multi(this,e,"remove"),"list"==this.getAttribute("data-clone-type")&&filter_list(this,e),this.remove()}))}))}function debounce(e,t){var i;return function(){i&&clearTimeout(i),i=setTimeout((function(){e(),i=null}),t||100)}}function addFilter(e,t,i){t&&-1==e[t].indexOf(i)&&e[t].push(i)}function removeFilter(e,t,i){Array.isArray(e[t])||(e[t]=["*"]);var o=e[t].indexOf(i);-1!=o&&e[t].splice(o,1)}function update_cookie_filter(e,t){for(x in $filter_cookie="",t)"null"!=x&&($filter_cookie.length>0&&($filter_cookie+=">"),$filter_cookie+=x+"<"+t[x].toString());$filter_cookie.length>0&&($filter_cookie+=">"),CG_Cookie_Set(e,"filter",$filter_cookie)}function getCookie(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):""}function CG_Cookie_Set(e,t,i){$secure="","https:"==window.location.protocol&&($secure="secure;"),cookie_name="simple_isotope_"+e,lecookie=getCookie(cookie_name),$val=t+":"+i,$cook=$val,""!=lecookie&&(lecookie.indexOf(t)>=0?($cook="",$arr=lecookie.split("&"),$arr.forEach(replaceCookie,$val)):$cook=lecookie+"&"+$val),document.cookie=cookie_name+"="+$cook+"; path=/; samesite=lax;"+$secure}function replaceCookie(e,t,i){this.startsWith("search:")&&e.indexOf("search:")>=0&&(i[t]=this),this.startsWith("sort:")&&e.indexOf("sort:")>=0&&(i[t]=this),this.startsWith("filter:")&&e.indexOf("filter:")>=0&&(i[t]=this),this.startsWith("range:")&&e.indexOf("range:")>=0&&(i[t]=this),$cook.length>0&&($cook+="&"),$cook+=i[t]}function splitCookie(e){if(me="#isotope-main-"+myid+" ",quicksearch=document.querySelector(me+".quicksearch"),e.indexOf("search:")>=0&&quicksearch&&(val=e.split(":"),qsRegex=new RegExp(val[1],"gi"),quicksearch.value=val[1]),e.indexOf("sort:")>=0){for(val=e.split(":"),val=val[1].split("-"),sort_by=val[0].split(","),asc="true"==val[1],sortAsc={},i=0;i<sort_by.length;i++)"featured"==sort_by[i]?sortAsc[sort_by[i]]=!1:sortAsc[sort_by[i]]=asc;for(asc=sortAsc,sortButtons=document.querySelectorAll(me+".sort-by-button-group button"),s=0;s<sortButtons.length;s++)"*"!=val[0]&&(sortButtons[s].classList.remove("is-checked"),sortButtons[s].getAttribute("data-sort-value")==val[0]&&(sortButtons[s].classList.add("is-checked"),sortButtons[s].setAttribute("data-sens","+"),"true"!=val[1]&&sortButtons[s].setAttribute("data-sens","-")))}if(e.indexOf("filter:")>=0&&(val=e.split(":"),val[1].length>0))for(val=val[1].split(">"),x=0;x<val.length-1;x++)if(values=val[x].split("<"),-1!=std_parents.indexOf(values[0])){if("tags"==values[0]&&"listmulti"==options[myid].displayfilter||"cat"==values[0]&&"listmulti"==options[myid].displayfiltercat){var t=(o=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0])).choicesInstance;if(filters[myid][values[0]]=values[1].split(","),"*"==values[1])t.setChoiceByValue("");else{for(t.removeActiveItemsByValue(""),vals=values[1].split(","),c=0;c<vals.length;c++)t.setChoiceByValue(vals[c]);if("offcanvas-body"==o.parentElement.parentElement.className)for(c=0;c<t.getValue().length;c++)lib=t.getValue()[c].label,sel=t.getValue()[c].value,child=null,create_clone_button(values[0],sel,lib,"list_multi",child),create_clone_listener(sel)}}else if("*"!=values[1]){for(filters[myid][values[0]]=values[1].split(","),"lang"==values[0]?filterButtons=document.querySelectorAll(me+".iso_lang button.is-checked"):filterButtons=document.querySelectorAll(me+".filter-button-group-"+values[0]+" button.is-checked"),f=0;f<filterButtons.length;f++)filterButtons[f].classList.remove("is-checked");for(v=0;v<filters[myid][values[0]].length;v++)if("tags"==values[0]&&"list"==options[myid].displayfilter||"cat"==values[0]&&"list"==options[myid].displayfiltercat){if((t=(o=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0])).choicesInstance).setChoiceByValue(filters[myid][values[0]][v]),"offcanvas-body"==o.parentElement.parentElement.className){t=o.choicesInstance;sel=filters[myid][values[0]][v],lib=t.getValue().label,child=null,create_clone_button(values[0],sel,lib,"list",child),create_clone_listener(sel)}}else{if($button=document.querySelector(me+".iso_button_"+values[0]+"_"+filters[myid][values[0]][v]),!$button)continue;addClass($button,"is-checked"),hasClass($button.parentNode.parentNode,"offcanvas-body")&&($type="button",("cat"!=values[0]||"multi"!=options[myid].displayfiltercat&&"multiex"!=options[myid].displayfiltercat)&&("tags"!=values[0]||"multi"!=options[myid].displayfilter&&"multiex"!=options[myid].displayfiltercat)&&("alpha"!=values[0]||"multi"!=options[myid].displayalpha&&"multiex"!=options[myid].displayalpha)||($type="multi"),child=null,lib=$button.innerHTML,create_clone_button(values[0],filters[myid][values[0]][v],lib,$type,child),create_clone_listener(filters[myid][values[0]][v]))}}}else if("listmulti"==options[myid].displayfilterfields){var o;t=(o=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0])).choicesInstance;if(filters[myid][values[0]]=values[1].split(","),"*"==values[1])t.setChoiceByValue("");else{for(t.removeActiveItemsByValue(""),vals=values[1].split(","),c=0;c<vals.length;c++)t.setChoiceByValue(vals[c]);if("offcanvas-body"==o.parentElement.parentElement.className)for(c=0;c<t.getValue().length;c++)lib=t.getValue()[c].label,sel=t.getValue()[c].value,child=null,create_clone_button(values[0],sel,lib,"list",child),create_clone_listener(sel)}}else if("*"!=values[1]){for(alist=document.querySelectorAll(me+".class_fields_"+values[0]+" .is-checked"),l=0;l<alist.length;l++)alist[l].classList.remove("is-checked");for(filters[myid][values[0]]=values[1].split(","),v=0;v<filters[myid][values[0]].length;v++)"list"==options[myid].displayfilterfields||"listex"==options[myid].displayfilterfields?(t=(o=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0])).choicesInstance,filters[myid][values[0]]=values[1].split(","),"*"==values[1]?t.setChoiceByValue(""):(t.removeActiveItemsByValue(""),t.setChoiceByValue(values[1]),"offcanvas-body"==o.parentElement.parentElement.parentElement.className&&(lib=t.getValue().label,sel=t.getValue().value,child=null,create_clone_button(values[0],sel,lib,"list",child),create_clone_listener(sel)))):($this=document.querySelector(me+".iso_button_"+values[0]+"_"+filters[myid][values[0]][v]),addClass($this,"is-checked"),child=$this.getAttribute("data-child"),child&&(sortValue=$this.getAttribute("data-sort-value"),set_family(me,"",child,sortValue,"button")),hasClass($this.parentNode.parentNode.parentNode,"offcanvas-body")&&($type="button",lib=$this.innerHTML,create_clone_button(values[0],filters[myid][values[0]][v],lib,$type,child),create_clone_listener(filters[myid][values[0]][v])))}e.indexOf("range:")>=0&&(val=e.split(":"),val[1].length>0&&(spl=val[1].split(","),min_range=parseInt(spl[0]),max_range=parseInt(spl[1])))}function set_family(e,t,i,o,s){for(parents=[];i;){if("list"==s){$this=document.querySelector(e+'.filter-button-group-fields [data-group-id="'+i+'"]'),listoptions=$this.querySelectorAll("option");for(var l=0;l<listoptions.length;l++)hasClass(listoptions[l],"iso_hide_elem")||addClass(listoptions[l],"iso_hide_elem");$all=$this.querySelector('[data-all="all"]'),removeClass($all,"iso_hide_elem"),$all.setAttribute("selected",!0),i=$all.getAttribute("data-child")}else{if($myparent=document.querySelector(e+".filter-button-group-fields").parentNode,$this=$myparent.querySelector('[data-group-id="'+i+'"]'),""==t||""!=t&&1==filters[myid][t].length&&"*"!=filters[myid][t]){buttons=$this.querySelectorAll("button");for(l=0;l<buttons.length;l++)hasClass(buttons[l],"iso_hide_elem")||addClass(buttons[l],"iso_hide_elem"),removeClass(buttons[l],"is-checked")}abutton=$this.querySelector("button.iso_button_tout"),removeClass(abutton,"iso_hide_elem"),addClass(abutton,"is-checked"),i=abutton.getAttribute("data-child")}if(0==parents.length){buttons=$this.querySelectorAll('[data-parent="'+o+'"]');for(l=0;l<buttons.length;l++)removeClass(buttons[l],"iso_hide_elem");if(newparents=$this.querySelectorAll('[data-parent="'+o+'"]'),parents=[],newparents.length>0)for($i=0;$i<newparents.length;$i++)newval="list"==s?newparents[$i].getAttribute("value"):newparents[$i].getAttribute("data-sort-value"),"*"!=newval&&parents.push(newval)}else{for(newparents=[],$i=0;$i<parents.length;$i++)if("*"!=(o=parents[$i])){buttons=$this.querySelectorAll('[data-parent="'+o+'"]');for(l=0;l<buttons.length;l++)removeClass(buttons[l],"iso_hide_elem");if($vals=$this.querySelectorAll('[data-parent="'+o+'"]'),$vals.length>0)for($j=0;$j<$vals.length;$j++)oneval="list"==s?$vals[$j].getAttribute("value"):$vals[$j].getAttribute("data-sort-value"),"*"!=oneval&&newparents.push(oneval)}parents=newparents}childstr=$this.getAttribute("data-filter-group"),filters[myid][childstr]=["*"],o=""}}function del_family(e,t,i,o,s){for(parents=[];i;){if(myparent=document.querySelector(e+".filter-button-group-fields").parentNode,$this=myparent.querySelector('[data-group-id="'+i+'"]'),abutton=$this.querySelector('[data-parent="'+o+'"]'),addClass(abutton,"iso_hide_elem"),removeClass(abutton,"is-checked"),abutton=$this.querySelector("button.iso_button_tout"),removeClass(abutton,"iso_hide_elem"),addClass(abutton,"is-checked"),i=$this.getAttribute("data-child"),0==parents.length){if(newparents=$this.querySelectorAll('[data-parent="'+o+'"]'),parents=[],newparents.length>0)for($i=0;$i<newparents.length;$i++)delval="list"==s?newparents[$i].getAttribute("value"):newparents[$i].getAttribute("data-sort-value"),"*"!=delval&&(parents.push(delval),addClass(newparents[$i],"iso_hide_elem"))}else{for(newparents=[],$i=0;$i<parents.length;$i++)if("*"!=(o=parents[$i])&&($vals=$this.querySelectorAll('[data-parent="'+o+'"]'),$vals.length>0))for($j=0;$j<$vals.length;$j++)delval="list"==s?$vals[$j].getAttribute("value"):$vals[$j].getAttribute("data-sort-value"),"*"!=delval&&(newparents.push(delval),addClass($vals[$j],"iso_hide_elem"));parents=newparents}childstr=$this.getAttribute("data-filter-group"),filters[myid][childstr]=["*"],o=""}}function set_family_all(e,t,i){for(parents=[];t;){for($this="list"==i?document.querySelector(e+".filter-button-group-fields"):document.querySelector(e+".filter-button-group-fields").parentNode,parents=$this.querySelectorAll('[data-child="'+t+'"]'),o=0;o<parents.length;o++)hasClass(parents[o],"iso_hide_elem")||(setval="list"==i?parents[o].getAttribute("value"):parents[o].getAttribute("data-sort-value"),setval&&"*"!=setval&&removeClass($this.querySelector('[data-parent="'+setval+'"]'),"iso_hide_elem"));if("list"==i)allbuton=$this.querySelector('[data-group-id="'+t+'"] [data-all="all"]'),t=allbutton.getAttribute("data-child");else{buttons=$this.querySelectorAll('[data-group-id="'+t+'"] button');for(var o=0;o<buttons.length;o++)removeClass(buttons[o],"is-checked");addClass($this.querySelector('[data-group-id="'+t+'"] button.iso_button_tout'),"is-checked"),myparent=$mychild=$this.querySelector('[data-group-id="'+t+'"]'),$mychild_all=$mychild.querySelector("button.iso_button_tout"),t=$mychild_all.getAttribute("data-child")}childstr=$this.getAttribute("data-filter-group"),filters[myid][childstr]=["*"]}}function go_click(e,t){event.preventDefault(),"webLinks"==e||window.event.ctrlKey?window.open(t,"_blank"):location=t}document.addEventListener("DOMContentLoaded",(function(){mains=document.querySelectorAll(".isotope-main");for(var e=0;e<mains.length;e++){var t=mains[e];if(myid=t.getAttribute("data"),"undefined"==typeof Joomla||void 0===Joomla.getOptions?console.log("Simple Isotope : Joomla /Joomla.getOptions  undefined"):options[myid]=Joomla.getOptions("mod_simple_isotope_"+myid),void 0===options[myid])return!1;iso_cat_k2(myid,options[myid])}if(grid_toggle=document.querySelector(".isotope_grid"),iso_article=document.querySelector(".isotope_an_article"),iso_div=document.querySelector(".isotope-main .isotope-div"),article_frame=document.querySelector("iframe#isotope_article_frame"),"ajax"==options[myid].readmore||"iframe"==options[myid].readmore){iso_height=grid_toggle.offsetHeight,iso_width=grid_toggle.offsetWidth,readmoretitles=document.querySelectorAll(".isotope-readmore-title");for(var i=0;i<readmoretitles.length;i++)["click","touchstart"].forEach((e=>{readmoretitles[i].addEventListener(e,(function(e){if($pos=iso_div.offsetTop,document.querySelector("body").scrollTo($pos,1e3),e.stopPropagation(),e.preventDefault(),addClass(grid_toggle,"isotope-hide"),addClass(iso_article,"isotope-open"),removeClass(iso_article,"isotope-hide"),iso_article.offsetHeight="auto",addClass(iso_article,"article-loading"),"ajax"==options[myid].readmore){document.querySelector("#isotope_an_article").innerHTML="";var t=document.getElementById("token");token=t.getAttribute("name"),url="?option=com_ajax&module=simple_isotope&article="+this.dataset.articleid+"&entree=articles&data=readmore&format=json&id="+myid,Joomla.request({method:"POST",url:url,onSuccess:function(e,t){removeClass(iso_article,"article-loading");var i=JSON.parse(e);iso_article.style.height=iso_height,iso_article.style.width=iso_width+"px",i.success||(i.success=!0),displayArticle(i.data)},onError:function(e){console.log(e.responseText)}})}else"iframe"==options[myid].readmore&&(0==iso_height&&(iso_height="100vh"),article_frame.style.height=0,article_frame.style.width=0,achar="?",this.dataset.href.indexOf("?")>0&&(achar="&"),article_frame.setAttribute("src",this.dataset.href+achar+"tmpl=component"),addClass(iso_article,"article-loading"),$close=document.querySelector("button.close"),addClass($close,"isotope-hide"),["click","touchstart"].forEach((e=>{$close.addEventListener(e,(function(e){e.stopPropagation(),e.preventDefault(),resetToggle()}))})));["click","touchstart"].forEach((e=>{grid_toggle.addEventListener(e,(function(e){e.stopPropagation(),e.preventDefault(),resetToggle()}))}))}))}))}["click","touchstart"].forEach((e=>{iso_div.addEventListener(e,(function(e){resetToggle()}))})),resetToggle=function(){grid_toggle&&hasClass(grid_toggle,"isotope-hide")?(removeClass(iso_article,"isotope-open"),addClass(iso_article,"isotope-hide"),removeClass(grid_toggle,"isotope-hide"),iso_div.refresh):iso_article&&hasClass(iso_article,"isotope-open")&&(removeClass(iso_article,"isotope-open"),addClass(iso_article,"isotope-hide"),iso_article.innerHTML(""),iso_div.refresh)},article_frame&&article_frame.addEventListener("load",(function(){removeClass(iso_article,"article-loading"),$close&&removeClass($close,"isotope-hide"),article_frame.style.height=iso_height,article_frame.style.width=iso_width+"px"}))})),hasClass=function(e,t){var i=new RegExp("(?:\\s|^)"+t+"(?:\\s|$)");return!!e.className.match(i)},addClass=function(e,t){e.className+=" "+t},removeClass=function(e,t){var i=new RegExp("(?:\\s|^)"+t+"(?:\\s|$)");e.className=e.className.replace(i," ")},toggleClass=function(e,t){hasClass(e,t)?removeClass(e,t):addClass(e,t)};var scrollTo=function(e,t){var i=document.scrollingElement||document.documentElement,o=i.scrollTop,s=e-o,l=performance.now(),a=function(r){var n=r-l;i.scrollTop=parseInt(function(e,t,i,o){return(e/=o/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t}(n,o,s,t)),n<t?requestAnimationFrame(a):i.scrollTop=e};requestAnimationFrame(a)};