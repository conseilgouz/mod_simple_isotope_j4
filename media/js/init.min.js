var $close,grid_toggle,iso_article,iso,me,empty_message,items_limit,sav_limit,iso_height,iso_width,article_frame,resetToggle,options,myid,qsRegex,$asc,$sortby,filters,rangeSlider,range_init,range_sel,min_range,max_range,cookie_name,std_parents=["cat","tags","lang","alpha"];function displayArticle(e){var t="";if(e.success){for(var l=0;l<e.data.length;l++){if(t+="<h1>"+e.data[l].title+'<button type="button" class="close">X</button></h1>',t+=e.data[l].fulltext,""==e.data[l].fulltext&&(t+=e.data[l].introtext),e.data[l].scripts.length>0)for(var s=0;s<e.data[l].scripts.length;s++){var a=document.createElement("script");a.addEventListener("load",(function(){console.log("Successfully loaded scripts")})),a.src=e.data[l].scripts[s],document.head.appendChild(a)}if(e.data[l].css.length>0)for(s=0;s<e.data[l].css.length;s++){var o=document.createElement("link");o.type="text/css",o.rel="stylesheet",o.addEventListener("load",(function(){console.log("Successfully loaded css")})),o.href=e.data[l].css[s],document.head.appendChild(o)}}iso_article.innerHTML=t,$close=document.querySelector("button.close"),["click","touchstart"].forEach((e=>{$close.addEventListener(e,resetToggle)}))}else if(t=e.message,e.messages&&e.messages.error)for(var i=0;i<e.messages.error.length;i++)t+="<br/>"+e.messages.error[i]}function iso_cat_k2(e,t){if(me="#isotope-main-"+e+" ",items_limit=t.limit_items,sav_limit=t.limit_items,empty_message="true"==t.empty,filters={},asc="true"==t.ascending,sort_by=t.sortby,-1!==sort_by.indexOf("featured"))for(sortValue=sort_by.split(","),asc={},r=0;r<sortValue.length;r++)"featured"==sortValue[r]?asc[sortValue[r]]=!1:asc[sortValue[r]]="true"==t.ascending;0==t.limit_items&&(document.querySelector(me+".iso_button_more").style.display="none"),""==t.default_cat||null==t.default_cat||void 0===t.default_cat?filters.cat=["*"]:filters.cat=[t.default_cat],""==t.default_tag||null==t.default_tag||void 0===t.default_tag?filters.tags=["*"]:filters.tags=[t.default_tag],filters.lang=["*"],filters.alpha=["*"];var l=getCookie(cookie_name);""!=l&&($arr=l.split("&"),$arr.forEach(splitCookie)),"true"==t.displayrange&&(min_range||(min_range=parseInt(t.minrange),max_range=parseInt(t.maxrange)),rangeSlider=new rSlider({target:"#rSlider",values:{min:parseInt(t.minrange),max:parseInt(t.maxrange)},step:parseInt(t.rangestep),set:[min_range,max_range],range:!0,tooltip:!0,scale:!0,labels:!0,onChange:rangeUpdated})),"string"==typeof sort_by&&(sort_by=sort_by.split(","));var s=document.querySelector(me+".isotope_grid");if(iso=new Isotope(s,{itemSelector:"none",percentPosition:!0,layoutMode:t.layout,getSortData:{title:"[data-title]",category:"[data-category]",date:"[data-date]",click:"[data-click] parseInt",rating:"[data-rating] parseInt",id:"[data-id] parseInt",blog:"[data-blog] parseInt",featured:"[data-featured] parseInt"},sortBy:sort_by,sortAscending:asc,isJQueryFiltering:!1,filter:function(e){if(e)return grid_filter(e)}}),imagesLoaded(s,(function(){iso.options.itemSelector=".isotope_item";var e=Array.prototype.slice.call(iso.element.querySelectorAll(".isotope_item"));iso.appended(e),updateFilterCounts(),"random"==sort_by&&iso.shuffle(),"undefined"!=typeof $toogle&&(iso_width=grid_toggle.width(),iso_height=grid_toggle.height())})),iso_div=document.querySelector(me+".isotope-div"),iso_div.addEventListener("refresh",(function(){iso.arrange()})),"infinite"==t.pagination){var a=Isotope.data(".isotope_grid"),o=new InfiniteScroll(".isotope_grid",{path:function(){return currentpage=this.loadCount,"?start="+(currentpage+1)*t.page_count},append:".isotope_item",outlayer:a,status:".page-load-status"});let e=document.querySelector(me+".iso_button_more");if("true"==t.infinite_btn){o.option({button:".iso_button_more",loadOnScroll:!1});let t=document.querySelector(".iso_button_more");e.style.display="block",["click","touchstart"].forEach((e=>{t.addEventListener(e,(function(e){e.stopPropagation(),e.preventDefault(),o.loadNextPage(),o.option({loadOnScroll:!0}),t.style.display="none",event.preventDefault()}))}))}else e.style.display="hide";o.on("append",(function(e,t,l,s){infinite_buttons(l)}))}if(hamburgerbtn=document.getElementById("offcanvas-hamburger-btn"),hamburgerbtn&&(["click"].forEach((e=>{hamburgerbtn.addEventListener(e,(function(e){var t=function(e,l=!1){!1===l||l>0?(0!=l&&l--,setTimeout((function(){t(e,l)}),100)):(void 0!==rangeSlider&&rangeSlider.onResize(),e())};t((function(){document.querySelector(".offcanvas")}),3)}))})),"*"!=filters.cat[0]||"*"!=filters.tags[0])){grouptype=["cat","tags"],optionstype=[t.displayfiltercat,t.displayfilter];for(var i=0;i<grouptype.length;i++)if("*"!=filters[grouptype[i]][0]&&(clone_exist=document.querySelector(me+'#clonedbuttons button[data-sort-value="'+filters[grouptype[i]]+'"]'),!clone_exist)){agroup=document.querySelectorAll(me+".filter-button-group-"+grouptype[i]+" button");for(var r=0;r<agroup.length;r++)agroup[r].getAttribute("data-sort-value")==filters[grouptype[i]]&&(create_clone_button(grouptype[i],filters[grouptype[i]],agroup[r].textContent,optionstype[i],""),create_clone_listener(filters[grouptype[i]]))}}var n=document.querySelectorAll(me+".sort-by-button-group button");for(r=0;r<n.length;r++)["click","touchstart"].forEach((e=>{n[r].addEventListener(e,(function(e){e.stopPropagation(),e.preventDefault(),update_sort_buttons(this);for(var t=0;t<n.length;t++)n[t].classList.remove("is-checked");this.classList.add("is-checked")}))}));var c=document.querySelector(me+".quicksearch");c&&c.addEventListener("keyup",debounce((function(){qsRegex=new RegExp(c.value,"gi"),CG_Cookie_Set(e,"search",c.value),iso.arrange(),updateFilterCounts()})));for(var u=document.querySelectorAll(me+".ison-cancel-squared"),d=0;d<u.length;d++)["click","touchstart"].forEach((t=>{u[d].addEventListener(t,(function(t){t.stopPropagation(),t.preventDefault(),c&&(c.value=""),qsRegex=new RegExp("","gi"),CG_Cookie_Set(e,"search",""),rangeSlider&&(range_sel=range_init,ranges=range_sel.split(","),rangeSlider.setValues(parseInt(ranges[0]),parseInt(ranges[1])),CG_Cookie_Set(e,"range",range_sel)),filters.cat=["*"],filters.tags=["*"],filters.lang=["*"],filters.alpha=["*"],grouptype=["cat","tags","alpha","fields"];for(var l=0;l<grouptype.length;l++){agroup=document.querySelectorAll(me+".filter-button-group-"+grouptype[l]+" button");for(var s=0;s<agroup.length;s++)agroup[s].classList.remove("is-checked"),"*"==agroup[s].getAttribute("data-sort-value")&&addClass(agroup[s],"is-checked"),"all"==agroup[s].getAttribute("data-all")&&agroup[s].setAttribute("selected",!0),"fields"==grouptype[l]&&(removeClass(agroup[s],"iso_hide_elem"),myparent=agroup[s].parentNode.getAttribute("data-filter-group"),myparent&&(filters[myparent]=["*"]))}agroup=document.querySelectorAll(me+".iso_lang button");for(s=0;s<agroup.length;s++)agroup[s].classList.remove("is-checked"),"*"==agroup[s].getAttribute("data-sort-value")&&addClass(agroup[s],"is-checked"),"all"==agroup[s].getAttribute("data-all")&&agroup[s].setAttribute("selected",!0);agroup=document.querySelectorAll(me+'select[id^="isotope-select-"]');for(s=0;s<agroup.length;s++){var a=agroup[s].parentElement.parentElement.parentElement.getAttribute("data-filter-group"),o=document.querySelector("joomla-field-fancy-select#isotope-select-"+a).choicesInstance;o.removeActiveItems(),o.setChoiceByValue(""),filters[a]=["*"]}$buttons=document.querySelectorAll("#clonedbuttons .is-checked");for(s=0;s<$buttons.length;s++)$buttons[s].remove();update_cookie_filter(filters),iso.arrange(),updateFilterCounts(),c&&c.focus()}))}));"listmulti"==t.displayfilter&&events_listmulti("tags"),"listmulti"==t.displayfiltercat&&events_listmulti("cat"),"listmulti"==t.displayfilterfields&&events_listmulti("fields"),"list"!=t.displayfiltercat&&"listex"!=t.displayfiltercat||events_list("cat"),"list"!=t.displayfilter&&"listex"!=t.displayfilter||events_list("tags"),"list"!=t.displayfilterfields&&"listex"!=t.displayfilterfields||events_list("fields"),"multi"!=t.displayfiltercat&&"multiex"!=t.displayfiltercat||events_multibutton("cat"),"multi"!=t.displayfilter&&"multiex"!=t.displayfilter||events_multibutton("tags"),"multi"!=t.displayfilterfields&&"multiex"!=t.displayfilterfields||events_multibutton("fields"),"multi"==t.language_filter&&events_multibutton("lang"),"multi"==t.displayalpha&&events_multibutton("alpha"),"button"==t.displayfiltercat&&events_button("cat"),"button"==t.displayfilter&&events_button("tags"),"button"==t.displayfilterfields&&events_button("fields"),"button"==t.language_filter&&events_button("lang"),"button"==t.displayalpha&&events_button("alpha"),more=document.querySelector(me+".iso_button_more"),more&&["click","touchstart"].forEach((e=>{more.addEventListener(e,(function(e){e.stopPropagation(),e.preventDefault(),items_limit>0?(items_limit=0,this.textContent=t.libless):(items_limit=t.limit_items,this.textContent=t.libmore),updateFilterCounts()}))}));var f=document.getElementById("offcanvas_isotope");f&&(f.addEventListener("hidden.bs.offcanvas",(function(){document.getElementById("offcanvas_isotope").classList.remove("offcanvas25"),document.getElementsByClassName("isotope_grid")[0].classList.remove("isogrid75"),document.getElementsByClassName("isotope_grid")[0].classList.remove("offstart"),document.getElementsByClassName("isotope_grid")[0].classList.remove("offend"),iso.arrange()})),f.addEventListener("show.bs.offcanvas",(function(){document.getElementById("offcanvas_isotope").classList.add("offcanvas25"),document.getElementById("offcanvas_isotope").classList.contains("offcanvas-start")&&document.getElementsByClassName("isotope_grid")[0].classList.add("offstart"),document.getElementById("offcanvas_isotope").classList.contains("offcanvas-end")&&document.getElementsByClassName("isotope_grid")[0].classList.add("offend"),iso.arrange()})))}function rangeUpdated(){range_sel=rangeSlider.getValue(),range_init=rangeSlider.conf.values[0]+","+rangeSlider.conf.values[rangeSlider.conf.values.length-1],CG_Cookie_Set(myid,"range",range_sel),iso.arrange()}function events_listmulti(e){agroup=document.querySelectorAll(me+'select[id^="isotope-select-'+e+'"]');for(var t=0;t<agroup.length;t++)agroup[t].addEventListener("choice",(function(e,t){filter_list_multi(this,e,"choice")})),agroup[t].addEventListener("removeItem",(function(e,t){filter_list_multi(this,e,"remove")})),$parent=agroup[t].parentElement.parentElement.parentElement.getAttribute("data-filter-group"),void 0===filters[$parent]&&(filters[$parent]=["*"]);if("*"!=filters[$parent][0]&&1==filters[$parent].length){var l=document.querySelector("joomla-field-fancy-select#isotope-select-"+e),s=l.choicesInstance,a=filters[$parent][0];s.removeActiveItemsByValue(""),s.setChoiceByValue(a),"offcanvas-body"==l.parentElement.parentElement.className&&(clone_exist=document.querySelector(me+'#clonedbuttons button[data-sort-value="'+filters[e]+'"]'),clone_exist||(sel=a,lib=s.getValue()[0].label,child=null,create_clone_button(e,sel,lib,"list",child),create_clone_listener(sel)))}}function events_list(e){agroup=document.querySelectorAll(me+".filter-button-group-"+e);for(var t=0;t<agroup.length;t++)agroup[t].addEventListener("choice",(function(e,t){filter_list(this,e,"choice")})),agroup[t].addEventListener("removeItem",(function(e,t){filter_list(this,e,"remove")}));var l=document.querySelector("joomla-field-fancy-select#isotope-select-"+e);if(l){var s=l.choicesInstance;s.setChoiceByValue(filters[e]),"offcanvas-body"==l.parentElement.parentElement.className&&"*"!=filters[e]&&(clone_exist=document.querySelector(me+'#clonedbuttons button[data-sort-value="'+filters[e]+'"]'),clone_exist||(sel=filters[e],lib=s.getValue().label,child=null,create_clone_button(e,sel,lib,"list",child),create_clone_listener(sel)))}}function events_button(e){agroup="lang"==e?document.querySelectorAll(me+".iso_lang button"):document.querySelectorAll(me+".filter-button-group-"+e+" button");for(var t=0;t<agroup.length;t++)["click","touchstart"].forEach((e=>{agroup[t].addEventListener(e,(function(e){e.stopPropagation(),e.preventDefault(),filter_button(this,e),mygroup=this.parentNode.querySelectorAll("button");for(var t=0;t<mygroup.length;t++)removeClass(mygroup[t],"is-checked");addClass(this,"is-checked")}))}))}function events_multibutton(e){agroup="lang"==e?document.querySelectorAll(me+".iso_lang button"):document.querySelectorAll(me+".filter-button-group-"+e+" button");for(var t=0;t<agroup.length;t++)["click","touchstart"].forEach((e=>{agroup[t].addEventListener(e,(function(e){e.stopPropagation(),e.preventDefault(),filter_multi(this,e),set_buttons_multi(this)}))}))}function update_sort_buttons(e){var t=e.getAttribute("data-sort-value");if("random"==t)return CG_Cookie_Set(myid,"sort",t+"-"),void iso.shuffle();for(sens=e.getAttribute("data-sens"),t=t.split(","),hasClass(e,"is-checked")?"-"==sens?(e.setAttribute("data-sens","+"),asc=!0):(e.setAttribute("data-sens","-"),asc=!1):(sens=e.getAttribute("data-init"),e.setAttribute("data-sens",sens),asc=!0,"-"==sens&&(asc=!1)),sortAsc={},i=0;i<t.length;i++)"featured"==t[i]?sortAsc[t[i]]=!1:sortAsc[t[i]]=asc;CG_Cookie_Set(myid,"sort",t+"-"+asc),iso.options.sortBy=t,iso.options.sortAscending=sortAsc,iso.arrange()}function infinite_buttons(e){if("false"!=options.displayalpha)for(x=0;x<e.length-1;x++)if(alpha=e[x].attributes["data-alpha"].value,mybutton=document.querySelector(me+".filter-button-group-alpha .iso_button_alpha_"+alpha),!mybutton){buttons=document.querySelector(me+".filter-button-group-alpha");var t=document.createElement("button");t.classList.add("btn"),t.classList.add(options.button_bootstrap.substr(4,100).trim()),t.classList.add("iso_button_alpha_"+alpha),t.setAttribute("data-sort-value",alpha),t.title=alpha,t.innerHTML=alpha,buttons.append(t)}}function grid_filter(e){var t=!qsRegex||e.textContent.match(qsRegex),l=e.getAttribute("data-category"),s=e.getAttribute("class").split(" "),a=!1,o=!0;if(-1==filters.alpha.indexOf("*")&&(alpha=e.getAttribute("data-title").substring(0,1),-1==filters.alpha.indexOf(alpha)))return!1;if(-1==filters.lang.indexOf("*")&&(lalang=e.getAttribute("data-lang"),-1==filters.lang.indexOf(lalang)))return!1;if(rangeSlider){var i=e.getAttribute("data-range");range_sel!=range_init&&(ranges=range_sel.split(","),o=parseInt(i)>=parseInt(ranges[0])&&parseInt(i)<=parseInt(ranges[1]))}if("fields"!=options.article_cat_tag&&"catfields"!=options.article_cat_tag&&"tagsfields"!=options.article_cat_tag&&"cattagsfields"!=options.article_cat_tag){if(-1!=filters.cat.indexOf("*")&&-1!=filters.tags.indexOf("*"))return t&&o&&!0;if(count=0,-1==filters.cat.indexOf("*")){if(-1==filters.cat.indexOf(l))return!1;count=1}if(-1!=filters.tags.indexOf("*"))return t&&o&&!0;for(var r in s)-1!=filters.tags.indexOf(s[r])&&(a=!0,count+=1);return"true"==options.searchmultiex?(lgth=filters.cat.length+filters.tags.length,-1==filters.tags.indexOf("*")&&-1==filters.cat.indexOf("*")||(lgth-=1),t&&o&&count==lgth):t&&o&&a}if(ix=0,void 0===filters)return t&&o&&!0;for(x in filterslength=0,filters)"cat"!=x&&"lang"!=x&&"alpha"!=x&&"tags"!=x&&(filterslength++,-1!=filters[x].indexOf("*")&&ix++);if(catok=!1,-1==filters.cat.indexOf("*")){if(-1==filters.cat.indexOf(l))return!1;catok=!0}else catok=!0;if(tagok=!1,-1==filters.tags.indexOf("*"))for(var r in s)-1!=filters.tags.indexOf(s[r])&&(tagok=!0);else tagok=!0;if(ix==filterslength&&catok&&tagok)return t&&o&&!0;for(var n in count=0,s)for(x in filters)"cat"!=x&&"lang"!=x&&"alpha"!=x&&"tags"!=x&&-1!=filters[x].indexOf(s[n])&&(count+=1);if("true"==options.searchmultiex){for(x in lgth=0,filters)"cat"!=x&&"lang"!=x&&"alpha"!=x&&"tags"!=x&&(lgth+=filters[x].length,-1!=filters[x].indexOf("*")&&(lgth-=1));return t&&o&&count==lgth&&tagok}return t&&o&&count>=filterslength-ix&&catok&&tagok}function filter_list(e,t,l){if($parent=e.getAttribute("data-filter-group"),$isclone=!1,"clonedbuttons"==e.parentNode.id?($selectid=$parent,$isclone=!0,sortValue=""):($selectid=e.getAttribute("data-filter-group"),sortValue=e.querySelector(".is-highlighted"),sortValue=sortValue.dataset.value),"undefined"==typeof sortValue&&(sortValue=""),elChoice=document.querySelector("joomla-field-fancy-select#isotope-select-"+$selectid),choicesInstance=elChoice.choicesInstance,$needclone=!1,$grdparent=e.parentNode,"offcanvas-body"==$grdparent.className&&($needclone=!0),"remove"==l&&$needclone)return removeFilter(filters,$parent,t.detail.value),myclone=document.querySelector('#clonedbuttons button[data-sort-value="'+t.detail.value+'"]'),myclone&&myclone.remove(),void(0==filters[$parent].length&&(filters[$parent]=["*"],choicesInstance.setChoiceByValue(""),update_cookie_filter(filters)));if(""==sortValue){choicesInstance.removeActiveItems(),choicesInstance.setChoiceByValue(""),filters[$parent]=["*"],$buttons=document.querySelectorAll('#clonedbuttons [data-filter-group="'+$parent+'"]');for(var s=0;s<$buttons.length;s++)$buttons[s].remove()}else if(filters[$parent]=[sortValue],$needclone){$buttons=document.querySelectorAll('#clonedbuttons [data-filter-group="'+$parent+'"]');for(s=0;s<$buttons.length;s++)$buttons[s].remove();clone_exist=document.querySelector(me+'#clonedbuttons button[data-sort-value="'+filters[$parent]+'"]'),clone_exist||(lib=t.detail.choice.label,create_clone_button($parent,sortValue,lib,"list",""),create_clone_listener(sortValue))}update_cookie_filter(filters),iso.arrange(),updateFilterCounts()}function filter_list_multi(e,t,l){$evnt=t,$params=l,$isclone=!1,"clonedbuttons"==e.parentNode.id?($parent=e.getAttribute("data-filter-group"),$selectid="isotope-select-"+$parent,$isclone=!0):($parent=e.parentNode.parentNode.parentNode.getAttribute("data-filter-group"),$selectid=e.getAttribute("id")),void 0===filters[$parent]&&(filters[$parent]=[]);var s=document.querySelector("joomla-field-fancy-select#"+$selectid).choicesInstance;if("remove"==$params){if($isclone){removeFilter(filters,$parent,e.getAttribute("data-sort-value")),savfilter=JSON.parse(JSON.stringify(filters)),s.removeActiveItems(),filters=JSON.parse(JSON.stringify(savfilter)),s.removeActiveItemsByValue("");for(var a=0;a<filters[$parent].length;a++)remval=filters[$parent][a],s.setChoiceByValue(remval)}else removeFilter(filters,$parent,$evnt.detail.value),myclone=document.querySelector('#clonedbuttons button[data-sort-value="'+$evnt.detail.value+'"]'),myclone&&myclone.remove();0==filters[$parent].length&&(filters[$parent]=["*"],s.setChoiceByValue(""))}if($needclone=!1,$grdparent=e.parentNode.parentNode.parentNode.parentNode.parentNode,"offcanvas-body"==$grdparent.classList[0]&&($needclone=!0),"choice"==$params){if(sel=$evnt.detail.choice.value,lib=$evnt.detail.choice.label,""==sel){filters[$parent]=["*"],s.removeActiveItems(),s.setChoiceByValue(""),$buttons=document.querySelectorAll('#clonedbuttons [data-filter-group="'+$parent+'"]');for(a=0;a<$buttons.length;a++)$buttons[a].remove()}else-1!=filters[$parent].indexOf("*")&&(s.removeActiveItemsByValue(""),filters[$parent]=[]),$needclone&&(clone_exist=document.querySelector(me+'#clonedbuttons button[data-sort-value="'+filters[$parent]+'"]'),clone_exist||(create_clone_button($parent,sel,lib,"list_multi",""),create_clone_listener(sel))),addFilter(filters,$parent,sel);s.hideDropdown()}update_cookie_filter(filters),iso.arrange(),updateFilterCounts()}function filter_button(e,t){if(!hasClass(e,"disabled")){$parent=e.parentNode.getAttribute("data-filter-group"),child=e.getAttribute("data-child");var l=e.getAttribute("data-sort-value");if($isclone=!1,"clonedbuttons"==e.parentNode.id&&($parent=e.getAttribute("data-filter-group"),abutton=document.querySelector(".isotope_button-group .iso_button_"+$parent+"_"+l),toggleClass(abutton,"is-checked"),l="*",-1!=std_parents.indexOf($parent)?abutton=document.querySelector(".iso_button_"+$parent+"_tout"):abutton=document.querySelector(".iso_button_tout.filter-button-group-"+$parent),toggleClass(abutton,"is-checked"),$isclone=!0),void 0===filters[$parent]&&(filters[$parent]={}),$needclone=!1,$grdparent=e.parentNode.parentNode,hasClass($grdparent,"offcanvas-body")&&($needclone=!0),$needclone){if(hasClass(e,"is-checked"))return;$buttons=document.querySelectorAll('#clonedbuttons [data-filter-group="'+$parent+'"]');for(var s=0;s<$buttons.length;s++)$buttons[s].remove();"*"!=l&&("img"==t.srcElement.localName?lib=t.srcElement.outerHTML+t.srcElement.nextSibling.textContent:lib=t.srcElement.innerHTML,create_clone_button($parent,l,lib,"button",child),create_clone_listener(l))}"*"==l?(filters[$parent]=["*"],$isclone&&e.remove,child&&set_family_all(me,child,"button")):(filters[$parent]=[l],child&&set_family(me,"",child,l,"button")),update_cookie_filter(filters),iso.arrange(),updateFilterCounts()}}function filter_multi(e,t){var l=e.getAttribute("data-sort-value");if(child=e.getAttribute("data-child"),$isclone=!1,"clonedbuttons"==e.parentNode.id){$parent=e.getAttribute("data-filter-group"),$buttons=document.querySelectorAll(".iso_button_"+$parent+"_"+l);for(var s=0;s<$buttons.length;s++)toggleClass($buttons[s],"is-checked");$isclone=!0}else $parent=e.parentNode.getAttribute("data-filter-group"),toggleClass(e,"is-checked");var a=hasClass(e,"is-checked");if($needclone=!1,$grdparent=e.parentNode.parentNode,hasClass($grdparent,"offcanvas-body")&&($needclone=!0),$needclone&&(a&&"*"!=l?(lib=t.srcElement.innerHTML,create_clone_button($parent,l,lib,"multi",child),create_clone_listener(l)):"*"!=l&&(aclone=document.querySelector("#clonedbuttons .iso_button_"+$parent+"_"+l),aclone.remove())),void 0===filters[$parent]&&(filters[$parent]=[]),"*"==l){filters[$parent]=["*"],clones=document.querySelectorAll('#clonedbuttons [data-filter-group="'+$parent+'"]');for(s=0;s<clones.length;s++)clones[s].remove();child&&set_family_all(me,child,"button")}else removeFilter(filters,$parent,"*"),removeFilter(filters,$parent,"none"),a?(addFilter(filters,$parent,l),child&&set_family(me,$parent,child,l,"button")):(removeFilter(filters,$parent,l),0==filters[$parent].length&&(filters[$parent]=["*"],$isclone&&(aclone=document.querySelector(".filter-button-group-"+$parent+' [data-sort-value="*"]'),addClass(aclone,"is-checked"))),child&&(filters[$parent]==["*"]?set_family_all(me,child,"button"):del_family(me,$parent,child,l,"button")));update_cookie_filter(filters),iso.arrange(),updateFilterCounts()}function set_buttons_multi(e){if($parent=e.parentNode.getAttribute("data-filter-group"),"*"==e.getAttribute("data-sort-value")){buttons=e.parentNode.querySelectorAll("button.is-checked");for(var t=0;t<buttons.length;t++)removeClass(buttons[t],"is-checked");addClass(e,"is-checked")}else 0==filters[$parent].length||"*"==filters[$parent]?(button_all=e.parentNode.querySelector('[data-sort-value="*"]'),addClass(button_all,"is-checked"),filters[$parent]=["*"],update_cookie_filter(filters),iso.arrange()):(button_all=e.parentNode.querySelector('[data-sort-value="*"]'),removeClass(button_all,"is-checked"))}function updateFilterCounts(){for(var e=document.querySelectorAll(me+".isotope_item"),t=document.querySelector(me+".iso_button_more"),l=iso.getFilteredItemElements(),s=l.length,a=document.querySelector(me+".iso_div_empty"),o=0;o<e.length;o++)hasClass(e[o],"iso_hide_elem")&&removeClass(e[o],"iso_hide_elem");if(empty_message&&(0==s?removeClass(a,"iso_hide_elem"):hasClass(a,"iso_hide_elem")||addClass(a,"iso_hide_elem")),items_limit>0){for(var i=0;i<l.length;i++)i>=items_limit&&addClass(e[i],"iso_hide_elem");i<items_limit&&"infinite"!=options.pagination?addClass(t,"iso_hide_elem"):removeClass(t,"iso_hide_elem")}if(0==items_limit&&sav_limit>0&&"infinite"!=options.pagination){for(i=0;i<l.length;i++)hasClass(l[i],"iso_hide_elem")&&(s-=1);s>sav_limit?removeClass(t,"iso_hide_elem"):addClass(t,"iso_hide_elem")}iso.arrange()}function create_clone_button(e,t,l,s,a){buttons=document.querySelector("#clonedbuttons");var o=document.createElement("button");o.classList.add("btn"),o.classList.add("btn-sm"),o.classList.add("iso_button_"+e+"_"+t),o.classList.add("is-checked"),o.setAttribute("data-sort-value",t),o.setAttribute("data-filter-group",e),o.setAttribute("data-clone-type",s),a&&o.setAttribute("data-child",a),l.indexOf("img src")>0?o.title=l.substr(l.indexOf(">")+1):o.title=l,o.innerHTML=l,buttons.prepend(o)}function create_clone_listener(e){onebutton=document.querySelector('#clonedbuttons [data-sort-value="'+e+'"] '),["click","touchstart"].forEach((e=>{onebutton.addEventListener(e,(function(e){e.stopPropagation(),e.preventDefault(),"multi"==this.getAttribute("data-clone-type")&&filter_multi(this),"button"==this.getAttribute("data-clone-type")&&filter_button(this),"list_multi"==this.getAttribute("data-clone-type")&&filter_list_multi(this,e,"remove"),"list"==this.getAttribute("data-clone-type")&&filter_list(this,e),this.remove()}))}))}function debounce(e,t){var l;return function(){l&&clearTimeout(l),l=setTimeout((function(){e(),l=null}),t||100)}}function addFilter(e,t,l){t&&-1==e[t].indexOf(l)&&e[t].push(l)}function removeFilter(e,t,l){Array.isArray(e[t])||(e[t]=["*"]);var s=e[t].indexOf(l);-1!=s&&e[t].splice(s,1)}function update_cookie_filter(e){for(x in $filter_cookie="",e)"null"!=x&&($filter_cookie.length>0&&($filter_cookie+=">"),$filter_cookie+=x+"<"+e[x].toString());$filter_cookie.length>0&&($filter_cookie+=">"),CG_Cookie_Set(myid,"filter",$filter_cookie)}function getCookie(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):""}function CG_Cookie_Set(e,t,l){$secure="","https:"==window.location.protocol&&($secure="secure;"),lecookie=getCookie(cookie_name),$val=t+":"+l,$cook=$val,""!=lecookie&&(lecookie.indexOf(t)>=0?($cook="",$arr=lecookie.split("&"),$arr.forEach(replaceCookie,$val)):$cook=lecookie+"&"+$val),document.cookie=cookie_name+"="+$cook+"; path=/; samesite=lax;"+$secure}function replaceCookie(e,t,l){this.startsWith("search:")&&e.indexOf("search:")>=0&&(l[t]=this),this.startsWith("sort:")&&e.indexOf("sort:")>=0&&(l[t]=this),this.startsWith("filter:")&&e.indexOf("filter:")>=0&&(l[t]=this),this.startsWith("range:")&&e.indexOf("range:")>=0&&(l[t]=this),$cook.length>0&&($cook+="&"),$cook+=l[t]}function splitCookie(e){if(me="#isotope-main-"+myid+" ",quicksearch=document.querySelector(me+".quicksearch"),e.indexOf("search:")>=0&&quicksearch&&(val=e.split(":"),qsRegex=new RegExp(val[1],"gi"),quicksearch.value=val[1]),e.indexOf("sort:")>=0){for(val=e.split(":"),val=val[1].split("-"),sort_by=val[0].split(","),asc="true"==val[1],sortAsc={},i=0;i<sort_by.length;i++)"featured"==sort_by[i]?sortAsc[sort_by[i]]=!1:sortAsc[sort_by[i]]=asc;for(asc=sortAsc,sortButtons=document.querySelectorAll(me+".sort-by-button-group button"),s=0;s<sortButtons.length;s++)"*"!=val[0]&&(sortButtons[s].classList.remove("is-checked"),sortButtons[s].getAttribute("data-sort-value")==val[0]&&(sortButtons[s].classList.add("is-checked"),sortButtons[s].setAttribute("data-sens","+"),"true"!=val[1]&&sortButtons[s].setAttribute("data-sens","-")))}if(e.indexOf("filter:")>=0&&(val=e.split(":"),val[1].length>0))for(val=val[1].split(">"),x=0;x<val.length-1;x++)if(values=val[x].split("<"),-1!=std_parents.indexOf(values[0])){if("tags"==values[0]&&"listmulti"==options.displayfilter||"cat"==values[0]&&"listmulti"==options.displayfiltercat){var t=(a=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0])).choicesInstance;if(filters[values[0]]=values[1].split(","),"*"==values[1])t.setChoiceByValue("");else{for(t.removeActiveItemsByValue(""),vals=values[1].split(","),c=0;c<vals.length;c++)t.setChoiceByValue(vals[c]);if("offcanvas-body"==a.parentElement.parentElement.className)for(c=0;c<t.getValue().length;c++)lib=t.getValue()[c].label,sel=t.getValue()[c].value,child=null,create_clone_button(values[0],sel,lib,"list_multi",child),create_clone_listener(sel)}}else if("*"!=values[1]){for(filters[values[0]]=values[1].split(","),"lang"==values[0]?filterButtons=document.querySelectorAll(me+".iso_lang button.is-checked"):filterButtons=document.querySelectorAll(me+".filter-button-group-"+values[0]+" button.is-checked"),f=0;f<filterButtons.length;f++)filterButtons[f].classList.remove("is-checked");for(v=0;v<filters[values[0]].length;v++){if("tags"==values[0]&&"list"==options.displayfilter||"cat"==values[0]&&"list"==options.displayfiltercat){if((t=(a=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0])).choicesInstance).setChoiceByValue(filters[values[0]][v]),"offcanvas-body"==a.parentElement.parentElement.className){t=a.choicesInstance;sel=filters[values[0]][v],lib=t.getValue().label,child=null,create_clone_button(values[0],sel,lib,"list",child),create_clone_listener(sel)}}else $button=document.querySelector(me+".iso_button_"+values[0]+"_"+filters[values[0]][v]),addClass($button,"is-checked"),hasClass($button.parentNode.parentNode,"offcanvas-body")&&($type="button",("cat"!=values[0]||"multi"!=options.displayfiltercat&&"multiex"!=options.displayfiltercat)&&("tags"!=values[0]||"multi"!=options.displayfilter&&"multiex"!=options.displayfiltercat)&&("alpha"!=values[0]||"multi"!=options.displayalpha&&"multiex"!=options.displayalpha)||($type="multi"),child=null,lib=$button.innerHTML,create_clone_button(values[0],filters[values[0]][v],lib,$type,child),create_clone_listener(filters[values[0]][v]))}}}else if("listmulti"==options.displayfilterfields){var a;t=(a=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0])).choicesInstance;if(filters[values[0]]=values[1].split(","),"*"==values[1])t.setChoiceByValue("");else{for(t.removeActiveItemsByValue(""),vals=values[1].split(","),c=0;c<vals.length;c++)t.setChoiceByValue(vals[c]);if("offcanvas-body"==a.parentElement.parentElement.className)for(c=0;c<t.getValue().length;c++)lib=t.getValue()[c].label,sel=t.getValue()[c].value,child=null,create_clone_button(values[0],sel,lib,"list",child),create_clone_listener(sel)}}else if("*"!=values[1]){for(alist=document.querySelectorAll(me+".class_fields_"+values[0]+" .is-checked"),l=0;l<alist.length;l++)alist[l].classList.remove("is-checked");for(filters[values[0]]=values[1].split(","),v=0;v<filters[values[0]].length;v++)"list"==options.displayfilterfields||"listex"==options.displayfilterfields?(t=(a=document.querySelector("joomla-field-fancy-select#isotope-select-"+values[0])).choicesInstance,filters[values[0]]=values[1].split(","),"*"==values[1]?t.setChoiceByValue(""):(t.removeActiveItemsByValue(""),t.setChoiceByValue(values[1]),"offcanvas-body"==a.parentElement.parentElement.parentElement.className&&(lib=t.getValue().label,sel=t.getValue().value,child=null,create_clone_button(values[0],sel,lib,"list",child),create_clone_listener(sel)))):($this=document.querySelector(me+".iso_button_"+values[0]+"_"+filters[values[0]][v]),addClass($this,"is-checked"),child=$this.getAttribute("data-child"),child&&(sortValue=$this.getAttribute("data-sort-value"),set_family(me,"",child,sortValue,"button")),hasClass($this.parentNode.parentNode.parentNode,"offcanvas-body")&&($type="button",lib=$this.innerHTML,create_clone_button(values[0],filters[values[0]][v],lib,$type,child),create_clone_listener(filters[values[0]][v])))}e.indexOf("range:")>=0&&(val=e.split(":"),val[1].length>0&&(spl=val[1].split(","),min_range=parseInt(spl[0]),max_range=parseInt(spl[1])))}function set_family(e,t,l,s,a){for(parents=[];l;){if("list"==a){$this=document.querySelector(e+'.filter-button-group-fields [data-group-id="'+l+'"]'),listoptions=$this.querySelectorAll("option");for(var o=0;o<listoptions.length;o++)hasClass(listoptions[o],"iso_hide_elem")||addClass(listoptions[o],"iso_hide_elem");$all=$this.querySelector('[data-all="all"]'),removeClass($all,"iso_hide_elem"),$all.setAttribute("selected",!0),l=$all.getAttribute("data-child")}else{if($myparent=document.querySelector(e+".filter-button-group-fields").parentNode,$this=$myparent.querySelector('[data-group-id="'+l+'"]'),""==t||""!=t&&1==filters[t].length&&"*"!=filters[t]){buttons=$this.querySelectorAll("button");for(o=0;o<buttons.length;o++)hasClass(buttons[o],"iso_hide_elem")||addClass(buttons[o],"iso_hide_elem"),removeClass(buttons[o],"is-checked")}abutton=$this.querySelector("button.iso_button_tout"),removeClass(abutton,"iso_hide_elem"),addClass(abutton,"is-checked"),l=abutton.getAttribute("data-child")}if(0==parents.length){buttons=$this.querySelectorAll('[data-parent="'+s+'"]');for(o=0;o<buttons.length;o++)removeClass(buttons[o],"iso_hide_elem");if(newparents=$this.querySelectorAll('[data-parent="'+s+'"]'),parents=[],newparents.length>0)for($i=0;$i<newparents.length;$i++)newval="list"==a?newparents[$i].getAttribute("value"):newparents[$i].getAttribute("data-sort-value"),"*"!=newval&&parents.push(newval)}else{for(newparents=[],$i=0;$i<parents.length;$i++)if("*"!=(s=parents[$i])){buttons=$this.querySelectorAll('[data-parent="'+s+'"]');for(o=0;o<buttons.length;o++)removeClass(buttons[o],"iso_hide_elem");if($vals=$this.querySelectorAll('[data-parent="'+s+'"]'),$vals.length>0)for($j=0;$j<$vals.length;$j++)oneval="list"==a?$vals[$j].getAttribute("value"):$vals[$j].getAttribute("data-sort-value"),"*"!=oneval&&newparents.push(oneval)}parents=newparents}childstr=$this.getAttribute("data-filter-group"),filters[childstr]=["*"],s=""}}function del_family(e,t,l,s,a){for(parents=[];l;){if(myparent=document.querySelector(e+".filter-button-group-fields").parentNode,$this=myparent.querySelector('[data-group-id="'+l+'"]'),abutton=$this.querySelector('[data-parent="'+s+'"]'),addClass(abutton,"iso_hide_elem"),removeClass(abutton,"is-checked"),abutton=$this.querySelector("button.iso_button_tout"),removeClass(abutton,"iso_hide_elem"),addClass(abutton,"is-checked"),l=$this.getAttribute("data-child"),0==parents.length){if(newparents=$this.querySelectorAll('[data-parent="'+s+'"]'),parents=[],newparents.length>0)for($i=0;$i<newparents.length;$i++)delval="list"==a?newparents[$i].getAttribute("value"):newparents[$i].getAttribute("data-sort-value"),"*"!=delval&&(parents.push(delval),addClass(newparents[$i],"iso_hide_elem"))}else{for(newparents=[],$i=0;$i<parents.length;$i++)if("*"!=(s=parents[$i])&&($vals=$this.querySelectorAll('[data-parent="'+s+'"]'),$vals.length>0))for($j=0;$j<$vals.length;$j++)delval="list"==a?$vals[$j].getAttribute("value"):$vals[$j].getAttribute("data-sort-value"),"*"!=delval&&(newparents.push(delval),addClass($vals[$j],"iso_hide_elem"));parents=newparents}childstr=$this.getAttribute("data-filter-group"),filters[childstr]=["*"],s=""}}function set_family_all(e,t,l){for(parents=[];t;){for($this="list"==l?document.querySelector(e+".filter-button-group-fields"):document.querySelector(e+".filter-button-group-fields").parentNode,parents=$this.querySelectorAll('[data-child="'+t+'"]'),s=0;s<parents.length;s++)hasClass(parents[s],"iso_hide_elem")||(setval="list"==l?parents[s].getAttribute("value"):parents[s].getAttribute("data-sort-value"),setval&&"*"!=setval&&removeClass($this.querySelector('[data-parent="'+setval+'"]'),"iso_hide_elem"));if("list"==l)allbuton=$this.querySelector('[data-group-id="'+t+'"] [data-all="all"]'),t=allbutton.getAttribute("data-child");else{buttons=$this.querySelectorAll('[data-group-id="'+t+'"] button');for(var s=0;s<buttons.length;s++)removeClass(buttons[s],"is-checked");addClass($this.querySelector('[data-group-id="'+t+'"] button.iso_button_tout'),"is-checked"),myparent=$mychild=$this.querySelector('[data-group-id="'+t+'"]'),$mychild_all=$mychild.querySelector("button.iso_button_tout"),t=$mychild_all.getAttribute("data-child")}childstr=$this.getAttribute("data-filter-group"),filters[childstr]=["*"]}}function go_click(e,t){event.preventDefault(),"webLinks"==e||window.event.ctrlKey?window.open(t,"_blank"):location=t}document.addEventListener("DOMContentLoaded",(function(){mains=document.querySelectorAll(".isotope-main");for(var e=0;e<mains.length;e++){var t=mains[e];if(myid=t.getAttribute("data"),"undefined"==typeof Joomla||void 0===Joomla.getOptions?console.log("Simple Isotope : Joomla /Joomla.getOptions  undefined"):options=Joomla.getOptions("mod_simple_isotope_"+myid),void 0===options)return!1;cookie_name="simple_isotope_"+myid,iso_cat_k2(myid,options)}if(grid_toggle=document.querySelector(".isotope_grid"),iso_article=document.querySelector(".isotope_an_article"),iso_div=document.querySelector(".isotope-main .isotope-div"),article_frame=document.querySelector("iframe#isotope_article_frame"),"ajax"==options.readmore||"iframe"==options.readmore){iso_height=grid_toggle.offsetHeight,iso_width=grid_toggle.offsetWidth,readmoretitles=document.querySelectorAll(".isotope-readmore-title");for(var l=0;l<readmoretitles.length;l++)["click","touchstart"].forEach((e=>{readmoretitles[l].addEventListener(e,(function(e){if($pos=iso_div.offsetTop,document.querySelector("body").scrollTo($pos,1e3),e.stopPropagation(),e.preventDefault(),addClass(grid_toggle,"isotope-hide"),addClass(iso_article,"isotope-open"),removeClass(iso_article,"isotope-hide"),iso_article.offsetHeight="auto",addClass(iso_article,"article-loading"),"ajax"==options.readmore){document.querySelector("#isotope_an_article").innerHTML="";var t=document.getElementById("token");token=t.getAttribute("name"),url="?option=com_ajax&module=simple_isotope&article="+this.dataset.articleid+"&entree=articles&data=readmore&format=json&id="+myid,Joomla.request({method:"POST",url:url,onSuccess:function(e,t){removeClass(iso_article,"article-loading");var l=JSON.parse(e);iso_article.style.height=iso_height,iso_article.style.width=iso_width+"px",l.success||(l.success=!0),displayArticle(l.data)},onError:function(e){console.log(e.responseText)}})}else"iframe"==options.readmore&&(0==iso_height&&(iso_height="100vh"),article_frame.style.height=0,article_frame.style.width=0,achar="?",this.dataset.href.indexOf("?")>0&&(achar="&"),article_frame.setAttribute("src",this.dataset.href+achar+"tmpl=component"),addClass(iso_article,"article-loading"),$close=document.querySelector("button.close"),addClass($close,"isotope-hide"),["click","touchstart"].forEach((e=>{$close.addEventListener(e,(function(e){e.stopPropagation(),e.preventDefault(),resetToggle()}))})));["click","touchstart"].forEach((e=>{grid_toggle.addEventListener(e,(function(e){e.stopPropagation(),e.preventDefault(),resetToggle()}))}))}))}))}["click","touchstart"].forEach((e=>{iso_div.addEventListener(e,(function(e){resetToggle()}))})),resetToggle=function(){grid_toggle&&hasClass(grid_toggle,"isotope-hide")?(removeClass(iso_article,"isotope-open"),addClass(iso_article,"isotope-hide"),removeClass(grid_toggle,"isotope-hide"),iso_div.refresh):iso_article&&hasClass(iso_article,"isotope-open")&&(removeClass(iso_article,"isotope-open"),addClass(iso_article,"isotope-hide"),iso_article.innerHTML(""),iso_div.refresh)},article_frame&&article_frame.addEventListener("load",(function(){removeClass(iso_article,"article-loading"),$close&&removeClass($close,"isotope-hide"),article_frame.style.height=iso_height,article_frame.style.width=iso_width+"px"}))})),hasClass=function(e,t){var l=new RegExp("(?:\\s|^)"+t+"(?:\\s|$)");return!!e.className.match(l)},addClass=function(e,t){e.className+=" "+t},removeClass=function(e,t){var l=new RegExp("(?:\\s|^)"+t+"(?:\\s|$)");e.className=e.className.replace(l," ")},toggleClass=function(e,t){hasClass(e,t)?removeClass(e,t):addClass(e,t)};var scrollTo=function(e,t){var l=document.scrollingElement||document.documentElement,s=l.scrollTop,a=e-s,o=performance.now(),i=function(r){var n=r-o;l.scrollTop=parseInt(function(e,t,l,s){return(e/=s/2)<1?l/2*e*e+t:-l/2*(--e*(e-2)-1)+t}(n,s,a,t)),n<t?requestAnimationFrame(i):l.scrollTop=e};requestAnimationFrame(i)};